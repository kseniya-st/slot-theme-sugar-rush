"use strict";
(()=>{function m(n,e){let s=0,t;return function(...i){let l=Date.now();s&&l-s<=e&&clearTimeout(t),s=l,t=setTimeout(()=>n(...i),e)}}var M=".js-header",_=".js-burger",f=".js-menu",h=".js-menu__item",E=".js-menu__list",L=".submenu",g="item_left",S="no-scroll",a="menu-active",o="active",y=()=>{let n=document.querySelector(M);n&&new d(n).init()},d=class{constructor(e){this.header=e,this.currentWidth=window.innerWidth,this.burgerEl=document.querySelector(_),this.menuEl=document.querySelector(f),this.menuItems=this.menuEl?.querySelectorAll(h),this.firstLevelMenuItems=this.menuEl?.querySelectorAll(`:scope > ${E} > ${h}`)}init(){this.initBurger(),this.initMenu(),this.updateOrientation(),this.setHeaderHeight(),window.addEventListener("resize",m(()=>{this.handleResize()},100))}handleResize(){this.currentWidth!==window.innerWidth&&(this.currentWidth=window.innerWidth,this.closeMenu(),this.updateOrientation(),this.setHeaderHeight())}initBurger(){this.burgerEl?.addEventListener("click",()=>this.toggleMenu())}initMenu(){this.menuItems?.forEach(e=>{e.querySelector(":scope > a")?.addEventListener("click",t=>{e.classList.contains(o)&&t.preventDefault()}),e.addEventListener("click",t=>{t.stopPropagation(),this.toggleMenuItem(e)})})}toggleMenuItem=e=>{e.classList.contains(o)||this.closeItemsInParentList(e),e.classList.toggle(o)};closeItemsInParentList=e=>{e.closest(E).querySelectorAll(`:scope > ${h}`).forEach(r=>r.classList.remove(o))};toggleMenu(){this.header.classList.contains(a)?this.closeMenu():this.openMenu()}closeMenu(){this.header?.classList.remove(a),document.body.classList.remove(S),this.menuItems?.forEach(e=>e.classList.remove(o))}openMenu(){window.scrollTo({top:0,left:0}),this.header?.classList.add(a),document.body.classList.add(S)}setHeaderHeight(){let e=this.header.getBoundingClientRect().height;this.header.style.setProperty("--header-height",`${e}px`)}updateOrientation(){this.firstLevelMenuItems?.forEach(e=>{e.classList.remove(g);let s=e.querySelectorAll(`:scope > ${L}`),t=Array.from(s).reduce((r,i)=>{i.style.display="block";let l=i.getBoundingClientRect().width,p=i.querySelectorAll(L),c=0;return p.forEach(u=>{u.style.display="block",c=Math.max(c,u.getBoundingClientRect().width),u.removeAttribute("style")}),i.removeAttribute("style"),r+l+c},0);window.innerWidth-e.getBoundingClientRect().left-80<t&&e.classList.add(g)})}};y();})();
